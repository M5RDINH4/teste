<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>FormulÃ¡rio A3 - Yamaha</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Ãcones Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: #f4f4f4;
      display: flex;
      justify-content: center;
      padding: 40px 15px;
      transition: background 0.3s;
    }

    .card {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      max-width: 520px;
      width: 100%;
      border-top: 5px solid #E60012;
      transition: background 0.3s, color 0.3s;
    }

    h2 {
      margin-top: 0;
      font-size: 24px;
      color: #E60012;
      text-align: center;
    }

    label {
      margin-top: 15px;
      display: block;
      font-weight: 600;
      color: #333;
    }

    .label-icon {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    select, input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      transition: border-color 0.3s, background 0.3s, color 0.3s;
    }

    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: #E60012;
    }

    textarea {
      resize: vertical;
    }

    .hidden {
      display: none;
    }

    button[type="submit"] {
      margin-top: 20px;
      width: 100%;
      background: #E60012;
      color: white;
      font-size: 16px;
      border: none;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button[type="submit"]:hover {
      background: #bb000e;
    }

    .dark {
      background: #1e1e1e;
    }

    .dark .card {
      background: #2b2b2b;
      color: #eee;
    }

    .dark label,
    .dark select,
    .dark input,
    .dark textarea {
      background: #444;
      border-color: #666;
      color: #eee;
    }

    .dark select:focus,
    .dark input:focus,
    .dark textarea:focus {
      border-color: #E60012;
    }

    .icon {
      color: #E60012;
    }

    #toggleDark {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #333;
      float: right;
    }

    .dark #toggleDark {
      color: #eee;
    }
  </style>
</head>
<body>

  <div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <h2><i class="fa-solid fa-motorcycle icon"></i> FormulÃ¡rio A3</h2>
      <button id="toggleDark" title="Modo Claro/Escuro">ðŸŒ™</button>
    </div>

    <form id="formA3">

      <label class="label-icon" for="controle"><i class="fa-solid fa-folder icon"></i> Controle</label>
      <select id="controle" name="controle" required>
        <option value="">Selecione</option>
      </select>

      <label class="label-icon" for="contramedida"><i class="fa-solid fa-wrench icon"></i> Contramedida</label>
      <select id="contramedida" name="contramedida" required>
        <option value="">Selecione o controle primeiro</option>
      </select>

      <label class="label-icon" for="status"><i class="fa-solid fa-triangle-exclamation icon"></i> Status</label>
      <select id="status" name="status" required>
        <option value="">Selecione</option>
        <option value="OK">OK</option>
        <option value="NG">NG</option>
      </select>

      <div id="ngCampos" class="hidden">
        <label class="label-icon" for="obsNG"><i class="fa-solid fa-pen-to-square icon"></i> O que estÃ¡ NG?</label>
        <textarea name="obsNG" rows="4"></textarea>

        <label class="label-icon" for="foto"><i class="fa-solid fa-camera icon"></i> Foto (opcional)</label>
        <input type="file" name="foto" accept="image/*">
      </div>

      <button type="submit"><i class="fa-solid fa-paper-plane"></i> Enviar</button>
    </form>
  </div>

  <script>
    const dados = {
      "A3 0011-24": [
        "MATERIAL, MÃ‰TODO DE FIXAÃ‡ÃƒO E NÃšMERO DE BICOS FORAM REAVALIADOS",
        "NOVO MÃ‰TODO DE DIRECIONAMENTO FOI AVALIADO",
        "CHECAGEM DO DISPOSITIVO ATUALIZADA",
        "TREINAMENTO EVIDENCIADO",
        "SEI ABERTA PARA INCLUSÃƒO DE PNP",
        "COTAÃ‡ÃƒO REALIZADA"
      ],
      "A3 0011-25": [
        "DESCARTE DE INSTRUMENTOS NÃƒO CONFORMES E OBSOLETOS",
        "IDENTIFICAÃ‡ÃƒO DE ANÃ‰IS PADRÃ•ES DE OGIVA DE MEDIÃ‡ÃƒO DO VIRABREQUIM",
        "ELABORAÃ‡ÃƒO DE LISTA DE INSTRUMENTOS DE MEDIÃ‡ÃƒO UTILIZADOS PELO OPERADOR",
        "ABERTURA DE SEI PARA IDENTIFICAÃ‡ÃƒO DE NÂº DE GPI EM ANÃ‰IS PADRÃƒO PARA ZERAMENTO DE OGIVA",
        "AQUISIÃ‡ÃƒO DE ANEL PADRÃƒO DE DIMENSÃƒO CORRETA PARA PROCESSO"
      ]
    };

    const controleSelect = document.getElementById("controle");
    const contramedidaSelect = document.getElementById("contramedida");
    const statusSelect = document.getElementById("status");
    const ngCampos = document.getElementById("ngCampos");

    Object.keys(dados).forEach(controle => {
      const opt = document.createElement("option");
      opt.value = controle;
      opt.textContent = controle;
      controleSelect.appendChild(opt);
    });

    controleSelect.addEventListener("change", () => {
      const contras = dados[controleSelect.value] || [];
      contramedidaSelect.innerHTML = '<option value="">Selecione</option>';
      contras.forEach(item => {
        const opt = document.createElement("option");
        opt.value = item;
        opt.textContent = item;
        contramedidaSelect.appendChild(opt);
      });
    });

    statusSelect.addEventListener("change", () => {
      ngCampos.classList.toggle("hidden", statusSelect.value !== "NG");
    });

    document.getElementById("formA3").addEventListener("submit", async (e) => {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      formData.append("dataVerificacao", new Date().toISOString());
      formData.append("proximaVerificacao", new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString());

      await fetch("https://SEU_WEBHOOK_DO_POWER_AUTOMATE", {
        method: "POST",
        body: formData
      });

      alert("Enviado com sucesso!");
      form.reset();
      ngCampos.classList.add("hidden");
    });

    document.getElementById("toggleDark").addEventListener("click", () => {
      document.body.classList.toggle("dark");
    });
  </script>

</body>
</html>
