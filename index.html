<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Formulário A3</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: #f4f6f8;
      display: flex;
      justify-content: center;
      padding: 40px 15px;
    }

    .card {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      max-width: 500px;
      width: 100%;
    }

    h2 {
      margin-top: 0;
      font-size: 22px;
      color: #333;
      text-align: center;
    }

    label {
      margin-top: 15px;
      display: block;
      font-weight: 600;
      color: #444;
    }

    select, input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      transition: border-color 0.3s;
    }

    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: #0078d4;
    }

    textarea {
      resize: vertical;
    }

    .hidden {
      display: none;
    }

    button {
      margin-top: 20px;
      width: 100%;
      background: #0078d4;
      color: white;
      font-size: 16px;
      border: none;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #005ea6;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>Formulário Acompanhamento A3</h2>

    <form id="formA3">

      <label for="controle">Controle</label>
      <select id="controle" name="controle" required>
        <option value="">Selecione</option>
      </select>

      <label for="contramedida">Contramedida</label>
      <select id="contramedida" name="contramedida" required>
        <option value="">Selecione o controle primeiro</option>
      </select>

      <label for="status">Status</label>
      <select id="status" name="status" required>
        <option value="">Selecione</option>
        <option value="OK">OK</option>
        <option value="NG">NG</option>
      </select>

      <div id="ngCampos" class="hidden">
        <label for="obsNG">O que está NG?</label>
        <textarea name="obsNG" rows="4"></textarea>

        <label for="foto">Foto (opcional)</label>
        <input type="file" name="foto" accept="image/*">
      </div>

      <button type="submit">Enviar</button>
    </form>
  </div>

  <script>
    const dados = {
      "A3 0011-24": [
        "MATERIAL, MÉTODO DE FIXAÇÃO E NÚMERO DE BICOS FORAM REAVALIADOS",
        "NOVO MÉTODO DE DIRECIONAMENTO FOI AVALIADO",
        "CHECAGEM DO DISPOSITIVO ATUALIZADA",
        "TREINAMENTO EVIDENCIADO",
        "SEI ABERTA PARA INCLUSÃO DE PNP",
        "COTAÇÃO REALIZADA"
      ],
      "A3 0011-25": [
        "DESCARTE DE INSTRUMENTOS NÃO CONFORMES E OBSOLETOS",
        "IDENTIFICAÇÃO DE ANÉIS PADRÕES DE OGIVA DE MEDIÇÃO DO VIRABREQUIM",
        "ELABORAÇÃO DE LISTA DE INSTRUMENTOS DE MEDIÇÃO UTILIZADOS PELO OPERADOR",
        "ABERTURA DE SEI PARA IDENTIFICAÇÃO DE Nº DE GPI EM ANÉIS PADRÃO PARA ZERAMENTO DE OGIVA",
        "AQUISIÇÃO DE ANEL PADRÃO DE DIMENSÃO CORRETA PARA PROCESSO"
      ]
    };

    const controleSelect = document.getElementById("controle");
    const contramedidaSelect = document.getElementById("contramedida");
    const statusSelect = document.getElementById("status");
    const ngCampos = document.getElementById("ngCampos");

    Object.keys(dados).forEach(controle => {
      const opt = document.createElement("option");
      opt.value = controle;
      opt.textContent = controle;
      controleSelect.appendChild(opt);
    });

    controleSelect.addEventListener("change", () => {
      const contras = dados[controleSelect.value] || [];
      contramedidaSelect.innerHTML = '<option value="">Selecione</option>';
      contras.forEach(item => {
        const opt = document.createElement("option");
        opt.value = item;
        opt.textContent = item;
        contramedidaSelect.appendChild(opt);
      });
    });

    statusSelect.addEventListener("change", () => {
      ngCampos.classList.toggle("hidden", statusSelect.value !== "NG");
    });

    document.getElementById("formA3").addEventListener("submit", async (e) => {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      formData.append("dataVerificacao", new Date().toISOString());
      formData.append("proximaVerificacao", new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString());

      await fetch("URL_DO_SEU_WEBHOOK", {
        method: "POST",
        body: formData
      });

      alert("Enviado com sucesso!");
      form.reset();
      ngCampos.classList.add("hidden");
    });
  </script>

</body>
</html>
